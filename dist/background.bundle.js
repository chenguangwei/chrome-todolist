(()=>{"use strict";class t{async createNotification(t){return chrome.notifications.create(`task-${t.id}`,{type:"basic",iconUrl:"/assets/icons/icon128.png",title:"任务提醒",message:t.title,buttons:[{title:"完成任务"},{title:"稍后提醒"}],requireInteraction:!0})}}chrome.alarms.onAlarm.addListener((async e=>{const a=e.name.replace("task-",""),s=((await chrome.storage.local.get("tasks")).tasks||[]).find((t=>t.id===parseInt(a)));if(s){const e=new t;await e.createNotification(s)}})),chrome.notifications.onButtonClicked.addListener((async(e,a)=>{const s=e.replace("task-",""),i=(await chrome.storage.local.get("tasks")).tasks||[],c=i.findIndex((t=>t.id===parseInt(s)));if(-1!==c)if(0===a)i[c].completed=!0,await chrome.storage.local.set({tasks:i});else if(1===a){new t;const e=i[c];await chrome.alarms.create(`task-${e.id}`,{when:Date.now()+9e5})}}))})();